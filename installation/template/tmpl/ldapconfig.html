<jtmpl:comment>
@package	HUBzero CMS
@author		Nicholas J. Kisseberth <nkissebe@purdue.edu>
@subpackage	Installation
@copyright	Copyright 2005-2009 by Purdue Research Foundation, West Lafayette, IN 47906
@license	http://www.gnu.org/licenses/gpl-2.0.html GPLv2
</jtmpl:comment>

<script language="JavaScript" type="text/javascript">
<!--
	function validateForm( frm, task ) {
		submitForm( frm, task );
		return;
		var valid = document.formvalidator.isValid(frm);
		if (valid == false) {
			return false;
		}
		var DBtype = getElementByName( frm, 'vars[DBtype]' );
		var DBhostname = getElementByName( frm, 'vars[DBhostname]' );
		var DBname = getElementByName( frm, 'vars[DBname]' );
		var DBPrefix = getElementByName( frm, 'vars[DBPrefix]' );

		var regex=/^[a-zA-Z]+[a-zA-Z0-9_]*$/;

		if ( DBtype.selectedIndex == 0 ) {
			alert( '<jtmpl:translate key="validType" escape="yes">Please select the database type</jtmpl:translate>' );
			return;
		} else if (DBhostname.value == '') {
			alert( '<jtmpl:translate key="validHost" escape="yes">Please enter the host name</jtmpl:translate>' );
			return;
		} else if (DBname.value == '') {
			alert( '<jtmpl:translate key="validName" escape="yes">Please enter a database name</jtmpl:translate>' );
			return;
		} else if (DBPrefix.value == '') {
			alert('<jtmpl:translate key="validPrefix" escape="yes">You must enter a MySQL Table Prefix for Joomla to operate correctly</jtmpl:translate>');
			return;
		} else if (DBname.value.length > 64) {
			alert('<jtmpl:translate key="MYSQLDBNAMETOOLONG" escape="yes">The MySQL Database Name must be a maximum of 64 characters</jtmpl:translate>');
			return;
		} else if (DBPrefix.value.length > 15) {
			alert('<jtmpl:translate key="MYSQLPREFIXTOOLONG" escape="yes">The MySQL Table Prefix must be a maximum of 15 characters</jtmpl:translate>');
			return;
		} else if (!regex.test(DBPrefix.value)) {
			alert('<jtmpl:translate key="MYSQLPREFIXINVALIDCHARS" escape="yes">The MySQL Table Prefix must start with a letter, and be followed by only letters, numbers or underscores</jtmpl:translate>');
			return;
		} else {
			submitForm( frm, task );
		}
	}

	function JProcess( action ) {
		return;
		if ( document.getElementById("vars_dbtype").selectedIndex == 0 ) {
			alert( '<jtmpl:translate key="validType" escape="yes">Please select the database type</jtmpl:translate>' );
			return;
		} else if (document.getElementById("vars_dbhostname").value == '') {
			alert( '<jtmpl:translate key="validHost" escape="yes">Please enter the host name</jtmpl:translate>' );
			return;
		} else if (document.getElementById("vars_dbusername").value == '') {
			alert( '<jtmpl:translate key="validUser" escape="yes">Please enter a database username</jtmpl:translate>' );
			return;
		}
	}
//-->
</script>

<form action="index.php" method="post" name="adminForm" id="adminForm" class="form-validate" autocomplete="off">
<div id="right">
	<div id="rightpad">
		<div id="step">
			<div class="t">
		<div class="t">
			<div class="t"></div>
		</div>
		</div>
		<div class="m">
				<div class="far-right">
					<jtmpl:tmpl name="buttons" type="condition" conditionvar="direction">
						<jtmpl:sub condition="ltr">
							<div class="button1-right"><div class="prev"><a onclick="submitForm( adminForm, 'dbconfig' );" alt="<jtmpl:translate escape="yes">Previous</jtmpl:translate>"><jtmpl:translate escape="yes">Previous</jtmpl:translate></a></div></div>
							<div class="button1-left"><div class="next"><a onclick="validateForm( adminForm, 'makeldap' );" alt="<jtmpl:translate escape="yes">Next</jtmpl:translate>"><jtmpl:translate escape="yes">Next</jtmpl:translate></a></div></div>
						</jtmpl:sub>
						<jtmpl:sub condition="rtl">
							<div class="button1-right"><div class="prev"><a onclick="validateForm( adminForm, 'makeldap' );" alt="<jtmpl:translate escape="yes">Next</jtmpl:translate>"><jtmpl:translate escape="yes">Next</jtmpl:translate></a></div></div>
							<div class="button1-left"><div class="next"><a onclick="submitForm( adminForm, 'dbconfig' );" alt="<jtmpl:translate escape="yes">Previous</jtmpl:translate>"><jtmpl:translate escape="yes">Previous</jtmpl:translate></a></div></div>
						</jtmpl:sub>
					</jtmpl:tmpl>
				</div>
				<span class="step"><jtmpl:translate>LDAP Configuration</jtmpl:translate></span>
			</div>
		<div class="b">
		<div class="b">
			<div class="b"></div>
		</div>
		</div>
	</div>

	<div id="installer">
			<div class="t">
		<div class="t">
			<div class="t"></div>
		</div>
		</div>
		<div class="m">

				<h2><jtmpl:translate>Connection Settings</jtmpl:translate>:</h2>
				<div class="install-text">
					<jtmpl:translate key="tipLDAPSteps">
					<p>Setting up Joomla! to run on your server involves 4 simple steps...</p>
					<p>Please enter the hostname of the server Joomla! is to be installed on.</p>
					<p>Enter the MySQL username, password and database name you wish to use with Joomla.</p>
					<p>Enter a prefix to be used by tables for this Joomla! installation. Select how to handle exisitng tables from a previous installation.</p>
					<p>Install the samples unless you are experienced want to start with a virtually empty site.</p>
					</jtmpl:translate>
				</div>
				<div class="install-body">
				<div class="t">
			<div class="t">
				<div class="t"></div>
			</div>
			</div>
			<div class="m">
							<h3 class="title-smenu" title="<jtmpl:translate>Basic</jtmpl:translate>"><jtmpl:translate>Basic Settings</jtmpl:translate></h3>
							<div class="section-smenu">
								<table class="content2">
								<tr>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr>
									<td colspan="2">
										<label for="vars_ldapprimaryuri">
											<span id="ldapprimaryurimsg"><jtmpl:translate>OpenLDAP Primary Host URI</jtmpl:translate></span>
										</label>
										<br />
										<input id="vars_ldapprimaryuri" class="inputbox validate required none ldapprimaryurimsg" type="text" name="vars[ldapPrimaryURI]" value="{VAR_LDAPPRIMARYURI}" />
									</td>
									<td>
										<em>
										<jtmpl:translate key="tipLDAPPrimaryHost">This is usually 'ldap://localhost'</jtmpl:translate>
										</em>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<label for="vars_ldapsecondaryuri">
											<span id="ldapsecondaryurimsg"><jtmpl:translate>OpenLDAP Secondary Host URI</jtmpl:translate></span>
										</label>
										<br />
										<input id="vars_ldapsecondaryuri" class="inputbox validate required none ldapsecondaryurimsg" type="text" name="vars[ldapSecondaryURI]" value="{VAR_LDAPSECONDARYURI}" />
									</td>
									<td>
										<em>
										<jtmpl:translate key="tipLDAPSecondaryHost">(optional)</jtmpl:translate>
										</em>
									</td>
								<tr>
									<td colspan="2">
										<label for="vars_ldapbasedn">
											<span id="ldapbasednmsg"><jtmpl:translate>Base DN</jtmpl:translate></span>
										</label>
										<br />
										<input id="vars_ldapbasedn" class="inputbox validate required none basednmsg" type="text" name="vars[ldapBaseDN]" value="{VAR_LDAPBASEDN}" />
									</td>
									<td>
										<em>
										<jtmpl:translate key="tipLDAPBaseUser">base DN</jtmpl:translate>
										</em>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<label for="vars_ldapsearchdn">
											<span id="ldapsearchdnmsg"><jtmpl:translate>Search DN</jtmpl:translate></span>
										</label>
										<br />
										<input id="vars_ldapsearchdn" class="inputbox validate required none ldapsearchdnmsg" type="text" name="vars[ldapSearchDN]" value="{VAR_LDAPSEARCHDN}" />
									</td>
									<td>
										<em>
										<jtmpl:translate key="tipLDAPSearchUser">DN with search abilities (leave empty for Anonymous bind)</jtmpl:translate>
										</em>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<label for="vars_ldapsearchpw">
											<jtmpl:translate>Search DN Password</jtmpl:translate>
										</label>
										<br />
										<input id="vars_ldapsearchpw" class="inputbox" type="password" name="vars[ldapSearchPW]" value="{VAR_LDAPSEARCHPW}" />
									</td>
									<td>
										<em>
										<jtmpl:translate key="tipLDAPSearchPW">Password for above search DN</jtmpl:translate>
										</em>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<label for="vars_ldapmanagerdn">
											<span id="ldapmanagerdnmsg"><jtmpl:translate>Manager DN</jtmpl:translate></span>
										</label>
										<br />
										<input id="vars_ldapmanagerdn" class="inputbox validate required none ldapmanagerdnmsg" type="text" name="vars[ldapManagerDN]" value="{VAR_LDAPMANAGERDN}" />
									</td>
									<td>
										<em>
										<jtmpl:translate key="tipLDAPManagerUser">DN with manager abilities (leave empty for Anonymous bind)</jtmpl:translate>
										</em>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<label for="vars_ldapmanagerpw">
											<jtmpl:translate>Manager DN Password</jtmpl:translate>
										</label>
										<br />
										<input id="vars_ldapmanagerpw" class="inputbox" type="password" name="vars[ldapManagerPW]" value="{VAR_LDAPMANAGERPW}" />
									</td>
									<td>
										<em>
										<jtmpl:translate key="tipLDAPManagerPW">Password for above manager DN</jtmpl:translate>
										</em>
									</td>
								</tr>
								<tr>
									<td colspan="2">
										<input id="vars_ldapnegotiatetls" type="checkbox" name="vars[ldapNegotiateTLS]" value="1" /><jtmpl:translate key="tipTLS">Enable TLS Negotiation</jtmpl:translate>
									</td>
									<td></td>
								</tr>
								</table>
								<br /><br />
							</div>
						<div class="clr"></div>
			</div>
			<div class="b">
				<div class="b">
					<div class="b"></div>
				</div>
			</div>
					<div class="clr"></div>
				</div>
		<div class="clr"></div>
		</div>
		<div class="b">
			<div class="b">
				<div class="b"></div>
			</div>
		</div>
		</div>
	</div>
</div>


<div class="clr"></div>
<input type="hidden" id="vars_lang" name="vars[lang]" value="{VAR_LANG}" />
<input type="hidden" name="task" value="" />
<input type="hidden" name="vars[ftpEnable]" value="0" />
</form>


