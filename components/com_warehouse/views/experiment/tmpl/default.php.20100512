<?php 
// Check to ensure this file is included in Joomla!
defined('_JEXEC') or die( 'Restricted access' );
?>

<?php 
  $document =& JFactory::getDocument();
  $document->addStyleSheet($this->baseurl."/components/com_warehouse/css/warehouse.css",'text/css');
  $document->addScript($this->baseurl."/components/com_warehouse/js/ajax.js", 'text/javascript');
  $document->addScript($this->baseurl."/components/com_warehouse/js/warehouse.js", 'text/javascript');
  $document->addScript($this->baseurl."/components/com_warehouse/js/resources.js", 'text/javascript');
?>

<?php $oProject = unserialize($_REQUEST[Search::SELECTED]); ?>
 
<div class="innerwrap>
  <div class="content-header">
	<h2 class="contentheading">NEES Project Warehouse</h2>
  </div>
  
  <div id="warehouseWindow" style="padding-top:20px;">
    <div id="title" style="padding-bottom:1em;">
      <span style="font-size:16px;font-weight:bold;"><?php echo $oProject->getTitle(); ?></span>
    </div>
      
    <div id="treeBrowser" style="float:left;width:20%;"></div>
    
    <div id="overview_section" class="main section" style="width:100%;float:left;">
      <?php $oExperiment = unserialize($_REQUEST[Experiments::SELECTED]); ?>
      
		<?php echo TabHtml::getSearchForm( "/warehouse/find" ); ?>
		<?php echo $this->strTabs; ?>
		<div class="aside">
		  <p><?php //echo $oExperiment->getExperimentThumbnailHTML(); ?></p>
		      
		  <div id="stats" style="margin-top:30px; border-width: 1px; border-style: dashed; border-color: #cccccc; ">
		    <p style="margin-left:10px; margin-top:10px;">1000 Views</p>
		          
		    <p style="margin-left:10px;">100 Downloads</p>    
		  </div>
		        
		      
		  <div id="curation">
		    <span class="curationTitle">Curation in progress:</span>
		    <?php echo $this->mod_curationprogress; ?>
		  </div>
		        
		  <div class="whatisthis">
		    <h4>What's this?</h4>
		    <p>
		      Once the curator starts working with your submission, monitor the object's progress by reading 
		      the curation history.
		    </p>
		  </div>
		</div>
		
		<div class="subject">
		  <div id="about" style="padding-top:1em;">
		    <div id="experimentTitle" style="padding-bottom:1em;font-size:14px;font-weight:bold;">
		      <?php echo $oExperiment->getName() .": ". $oExperiment->getTitle(); ?>
		    </div>
		    
		    <div id="experimentInfo">
		      <div class="sscontainer">
		        <div id="showcase">
		          <div id="showcase-prev" class=""></div>
		          <div id="showcase-window">
		          <div class="showcase-pane" style="left: 0px;">
		            <a title="Description about experiment" href="/components/com_warehouse/images/prototype/pics/20060615_mast_TWall_NTW1_Test1.3_S3B_img_200344CDT.jpg" rel="lightbox">
		              <img class="thumbima" alt="thumbnail" src="/components/com_warehouse/images/prototype/pics/20060615_mast_TWall_NTW1_Test1.3_S3B_img_200344CDT-tn.jpg">
		            </a>
	                <a title="Description about experiment" href="/components/com_warehouse/images/prototype/pics/20060616_mast_TWall_NTW1_Test1.3_S4A_img_083228CDT.jpg" rel="lightbox">
		              <img class="thumbima" alt="thumbnail" src="/components/com_warehouse/images/prototype/pics/20060616_mast_TWall_NTW1_Test1.3_S4A_img_083228CDT-tn.jpg">
		            </a>
	                <a title="Description about experiment" href="/components/com_warehouse/images/prototype/pics/20060616_mast_TWall_NTW1_Test1.3_S4A_img_095710CDT.jpg" rel="lightbox">
		              <img class="thumbima" alt="thumbnail" src="/components/com_warehouse/images/prototype/pics/20060616_mast_TWall_NTW1_Test1.3_S4A_img_095710CDT-tn.jpg">
		            </a>
	                <a title="Description about experiment" href="/components/com_warehouse/images/prototype/pics/20060618_mast_TWall_NTW1_Test1.7_S1B_img_103555CDT.jpg" rel="lightbox">
		              <img class="thumbima" alt="thumbnail" src="/components/com_warehouse/images/prototype/pics/20060618_mast_TWall_NTW1_Test1.7_S1B_img_103555CDT-tn.jpg">
		            </a>
		            <a title="UT field evaluation liquification 1" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_UT_pore_pressure_view.png" rel="lightbox">
		              <img class="thumbima" alt="UT field evaluation liquification 1" src="/components/com_warehouse/images/prototype/indeed/indeed_UT_pore_pressure_view-tn.gif">
		            </a> 
		            <a title="UT field evaluation liquefaction - 2" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_UT_pressure_vs_time.png" rel="lightbox">
		              <img class="thumbima" alt="UT field evaluation liquefaction - 2" src="/components/com_warehouse/images/prototype/indeed/indeed_UT_pressure_vs_time-tn.gif">
		            </a> 
		            <a title="UT field evaluation liquefaction - 3" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_UT_with_legend.png" rel="lightbox">
		              <img class="thumbima" alt="UT field evaluation liquefaction - 3" src="/components/com_warehouse/images/prototype/indeed/indeed_UT_with_legend-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 1" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_disp_vs_force.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 1" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_disp_vs_force-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 2" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_disp_vs_force_2.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 2" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_disp_vs_force_2-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 3" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_disp_vs_force_3.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 3" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_disp_vs_force_3-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 4" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_disp_vs_force_4.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 4" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_disp_vs_force_4-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 5" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_disp_vs_time.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 5" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_disp_vs_time-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 6" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_force_view.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 6" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_force_view-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 7" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_force_vs_time.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 7" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_force_vs_time-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 8" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_selected_strain_vs_time.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 8" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_selected_strain_vs_time-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 9" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_strain_vs_time.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 9" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_strain_vs_time-tn.gif">
		            </a> 
		            <a title="non-rectangular walls - 10" href="http://www.neeshub.org/site/resources/2009/12/00210/117/indeed_walls_string_pots_view.png" rel="lightbox">
		              <img class="thumbima" alt="non-rectangular walls - 10" src="/components/com_warehouse/images/prototype/indeed/indeed_walls_string_pots_view-tn.gif">
		            </a>
		          </div>
		          </div>
		          <div id="showcase-next" class=""></div>
		        </div>
		      </div>
		    
		      <table cellpadding="1" cellspacing="1" style="margin-top:20px;border-bottom:0px;border-top:0px;">
		        <tr id="description">
		          <td style="font-weight:bold;">Description:</td>
		          <td><?php echo $oExperiment->getDescription(); ?></td>
		        </tr>
		        <tr id="dates">
		          <td style="font-weight:bold;">Dates:</td>
		          <td><?php echo $this->strDates; ?></td>
		        </tr>
		        <tr id="facility">
		          <td style="font-weight:bold;">Facility:</td>
		          <td>
		            <?php 
		              $oOrganizationArray = unserialize($_REQUEST[OrganizationPeer::TABLE_NAME]);
		              foreach($oOrganizationArray as $iKey => $oOrganization){
		              ?>
		                <span class="nobr"><a href="/facilities"><?php echo $oOrganization->getName(); ?></a></span>
		                <?php
		                  if($iKey < sizeof($oOrganizationArray)-1){
		                    echo ", ";
		                  }   
		              }
		            ?>
		          </td>
		        </tr>
		        <tr id="specimenType">
		          <td style="font-weight:bold;">Specimen Type:</td>
		          <td>Reinforced Wall</td>
		        </tr>
		        <tr id="specimenMaterial">
		          <td style="font-weight:bold;">Specimen Material:</td>
		          <td>
		            <?php if($oExperiment->getId()==28):?>
		              Reinforced Concrete
		            <?php endif; ?>
		          </td>
		        </tr>
		        <tr id="sensors">
		          <td style="font-weight:bold;">Sensors:</td>
		          <td>
		           <?php 
		             $oLocationPlanArray = unserialize($_REQUEST[LocationPlanPeer::TABLE_NAME]);
		             foreach($oLocationPlanArray as $oLocationPlan){
		               ?>
		               <a href="javascript:void(0);" onClick="getMootools('/warehouse/sensors/<?php echo $oLocationPlan->getId(); ?>/project/<?php echo $oProject->getId(); ?>/experiment/<?php echo $oExperiment->getId(); ?>?format=ajax', 'experimentInfo');"><?php echo $oLocationPlan->getName() ?></a><br>
		               <?php
		             }
		           ?>
		          </td>
		        </tr>
		        <tr id="material">
		          <td style="font-weight:bold;">Materials:</td>
		          <td>
		            <?php if($oExperiment->getId()==28):?>
		            <a href="javascript:void(0);" onClick="getMootools('/warehouse/materials/28?format=ajax', 'experimentInfo');">Properties</a>
		            <?php endif;?>
		          </td>
		        </tr>
		        <tr id="drawings">
		          <td style="font-weight:bold;">Drawings:</td>
		          <td>
		            <?php 
		              $oDrawingArray =  unserialize($_REQUEST["Drawings"]);
		              foreach($oDrawingArray as $oDrawing){
		                $strTitle = StringHelper::hasText(trim($oDrawing['TITLE'])) ? $oDrawing['TITLE'] : $oDrawing['CURATED_TITLE'];
		              ?>
		                <a href="/warehouse/get/<?php echo $oDrawing['PATH']."/".$oDrawing['NAME']; ?>" title=""><?php echo $strTitle; ?></a>  
		              <?php 
		              }
		            ?>
		            <!--<a href="/warehouse/get/pdf/RWNPhoto_plan.pdf" target="data_file">Rectangular Wall With Normal Reinforcement Crack Drawings</a>-->
		          </td>
		        </tr>
		        <tr id="trials">
		          <td style="font-weight:bold;">Trials:</td>
		          <td>
		            <?php 
		              $oTrialArray = unserialize($_REQUEST[TrialPeer::TABLE_NAME]);
		            ?>
		            <select id="cboTrials" name="trial" onChange="getTrialInfo(this.id, 'trial', 'trialDesc');getTrialInfo(this.id, 'repetitions', 'repetitionList');">
		              <option value="">Select Trial</option>
		              <?php 
		                foreach($oTrialArray as $oTrial){ ?>
		                  <option value="<?php echo $oTrial->getId(); ?>"><?php echo $oTrial->getName() .": ". $oTrial->getTitle(); ?></option>
		                <?php }
		              ?>
		            </select>
		            <div id="trialDesc"></div>
		          </td>
		        </tr>
		        <?php if($this->repetitionDataFileSize > 0): ?>
		        <tr id="repetitions">
		          <td style="font-weight:bold;">Repetitions:</td>
		          <td>
		            <div id="repetitionList"><span style="color:#999999">Repetitions appear after selecting a trial.</span></div>
		            <div id="repetitionDesc"></div>
		          </td>
		        </tr>
		        <?php endif; ?>
		        <tr id="data">
		          <td style="font-weight:bold;">Data:</td>
		          <td>
		            <div id="dataList"><span style="color:#999999">Data appears after selecting a trial and/or repetition.</span></div>
		          </td>
		        </tr>
		        <tr id="documents">
		          <td style="font-weight:bold;">Documents:</td>
		          <td><?php echo $this->mod_warehousedocs; ?></td>
		        </tr>
		        <tr id="tags">
		          <td style="font-weight:bold;">Tags:</td>
		          <td><?php echo $this->mod_warehousetags; ?></td>
		        </tr>
		      </table>
		    </div>  
		  </div>
		</div>  
    </div>
	<!-- close overview_section -->
	
    <div class="clear"></div>
  </div>
  
</div>
</form>


